 지표설정과 로그정의하기를 배워봤다.
 AB그룹을 어떻게 나눌지 몇명으로 대상으로 하면 좋을지


### 샘플링 
샘플: 실험대상으로 선택된 사용자들
샘플사이: 선택된 사용자들의 수

AB사용자를 분할하는 방법에 대해 알아보자.

샘플링방법3가지

1. 무작위 할당(흔함)
	- 기준없이 할당
 장점 : 작업이 쉽고 편형을 줄일수있다.
 단점 : 모집단의 특성을 고려하지 않고 무작위로 할당하면 실험 결과에 오류를 초래할수있다.
 (통계적 가설검증으로도 못하나?)

 예를 들어 학교에서 학생들을 대상으로 진행하는데
 남학생비율은 80%이고 여학생비율은 20%입니다.
 무작위로 선택된 샘플이 대다수를 차지하는 남학생들로만 이루어진다면, 여학생들의 의견이 무시될수있다.

따라서 무작위 할당할때 모집단의 특성을 고려해서 샘플링해야함

2. 계층적 샘플링
	- 모집단을 여러 그룹으로 나눠서 각 그룹에서 무작위로 샘플링 하는 방식
	- 그룹을 나누는 기준이 되는 특성이 계층변수(성별,나이등)
	 예를 들어 남학생 80%이고 여학생%인 학교일 경우 남학생과 여학생을 8대2비율로 나누어 샘플을 추출한다. 결론적으로 남학생이 더 많은 모집단의 특성을 고려해 더 신뢰할 수 있는 결과
	 남학생과 여학생이 5대5로 균일하면 계층적 샘플링을 쓸필요가없다.
3. 클러스터 샘플링
	- 모집단을 여러 개의 클러스터로 나눈 다음, 몇개의클러스터를 무작위로 선택하여 해당 클러스터 내의 모든 참여자를 같은그룹으로 생각하는 방식
	- 예를 들면 일반회원과 VIP회원이 있으면 각 회원 등급별로 클러스터를 만들어 대상마다 서로 다른 혜택이나 할인 정책등을 실험할수있겠죠?
	- 클러스터별로 실험을 하기 때문에 관리가 쉽다

세가지 샘플링 방식 모두 한번 정해진 분할은 바뀌지 않는다.
한 사용자가 방문을 계속해도 항상 같은 화면을 보게 된다.

### 코드비앤비예시
![[Pasted image 20241231220700.png]]
무작위 할당은 가장 적절한다.

남녀같은구분도 필요도없다.
일반회원과 vip도 필요없다. 계층과 클러스터가 필요없음.
#### 샘플사이즈
어느정도 규모의 사용자가 실험에 참여할 때 결과를 신뢰할 수 있다고 여길지를 정해야한다. 
- 모든 사용자가 실험에 참여하려면 오랜시간이 걸리기 때문에 적절한 사용자의 크기를 정해 실험에 참여시켜야한다.

1. 샘플 사이즈가 **클수록 두 그룹의 결과 차이가 유의미한 결론**
2. 작은 샘플에서는 우연에 의한 결과의 영향을 크게 받을 수 있지만, 큰 샘플에서는 그 영향을 줄일 수 있다. - 예를 들어 3명중 1명이 출석을 안하면 영향을 크게 받음., 1000명중 1명이 출석안해도 모른다.
3. 샘플 사이즈가 작으면 두 그룹의 결과가 확실하게 큰 차이가 나야 실험결과가 유의미하다.

#### 적절한 샘플 사이즈란?
A그룹과 B그룹의 차이가 어느 정도 나기를 기대하는가를 먼저 결정

A그룹과 B그룹 변화를 감지하기위해 10%이상의 차이를 기대하고 있다면 이에따라 샘플 사이즈를 조정해야함


[샘플 사이즈 계산기](https://www.abtasty.com/sample-size-calculator/)
이렇게 샘플 크기 계산을 할수있다.

### 계산기 사용을 위한 예시 상황
방문자수가 10000명이 상품 지면
노출로직을 랜덤에서 추천 로직으로 변경하려고 함
목표지표는 구매전환율이다.
현재 기존안 구매전환율이 3%이다.

MDE를 정해야지 두개의 안을 얼마나 차이가 나야지 개선이 됬는지 판단하는 방법

![[Pasted image 20241231230350.png]]
방문자가 1만명이고 구매 전환율이 3%라면 
두그룹의 차이가 3.8퍼정도 차이나야하고 상대적퍼센트는 28.78%차이가 나야 효과적인거라고 판단할수있다.

샘플사이즈를 알기위해
![[Pasted image 20241231230511.png]]
전환율 3%를 입력하고
보통 신뢰수준이 95%로 한다.
100번진행할때 95번 결과가 나온다.
power는 검정력 80%를 대부분쓴다. 
80% 시간과 비용이많이든다