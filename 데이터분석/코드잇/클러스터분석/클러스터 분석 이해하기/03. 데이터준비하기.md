
### 데이터 확인 
분석에 사용할 데이터는 고객 254명의 상품 구매 관련 데이터
```python
import pandas as pd

# 판다스 출력 결과를 소수점 둘째 자리 까지로 제한
pd.options.display.float_format = '{:,.2f}'.format

sales_df = pd.read_csv('data/sales_data.csv', index_col=['customer_id'])

sales_df

```
- 인덱스를 customer_id로 설정
### 이상치 제거
```python
import seaborn as sns

sns.set(style="darkgrid",
        rc={'figure.figsize':(16,9)})

# 데이터 시각화
sns.scatterplot(x=sales_df['total_buy_cnt'], y=sales_df['total_price'], s=200)

```
아주 큰 값을 가진 데이터가 하나 보이는데요. 이런 이상치는 결과에 영향을 줄 수 있기 때문에 제거해야 합니다.
### IQR을 통한 이상치 제거
```python
def get_outlier_mask(df,weight=1.5):
	
	Q1= df.quantile(0.25) # q1구하기
	
	Q3= df.quantile(0.75) # q3구하기
	
	IQR= Q3-Q1 #IQR구하기
	
	lower_bound= Q1-weight*IQR # 위에 기준 이것보다 넘으면 안돼 이안에있어야해
	
	upper_bound= Q3+weight*IQR # 이것보다 낮으면 안돼 이안에 있어야해
	
	outlier_per_columns = (df<lower_bound) | (df>upper_bound)
	# lower_bound보다 낮거나 upper_bound보다 크거나의 기준
	
	is_outlier = outlier_per_columns.any(axis=1)  # 기준에 만족하는 로우들
	
	return is_outlier
```

```python
outlier_idx_cust_df = get_outlier_mask(sales_df, weight=1.5)
# 아웃라이어 제거한 데이터 프레임만 추가

sales_df = sales_df[~outlier_idx_cust_df] # 불린인덱싱으로 이상치를 제거한 데이터프레임만 

```